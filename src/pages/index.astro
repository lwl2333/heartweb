---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Hero from '../components/Hero.astro';
import Story from '../components/Story.astro';
import Timeline from '../components/Timeline.astro';
import Gallery from '../components/Gallery.astro';
import Footer from '../components/Footer.astro';

// Read content from YAML
import fs from 'node:fs';
import path from 'node:path';
import yaml from 'js-yaml';

const contentPath = path.join(process.cwd(), 'data', 'content.yaml');
let content: any = {};

try {
  const fileContent = fs.readFileSync(contentPath, 'utf8');
  content = yaml.load(fileContent) as any;
} catch (e) {
  console.error('Error reading content.yaml:', e);
  // Fallback content
  content = {
    site: {
      names: ['Luoluo', 'Gaby'],
      subtitle: 'A journey through time, love, and endless moments',
      quote: 'In all the world, there is no heart for me like yours.'
    },
    timeline: [],
    gallery: []
  };
}

const { site, timeline, gallery } = content;
---

<BaseLayout title={`${site.names[0]} â¤ ${site.names[1]} - Our Love Story`}>
  <Header names={site.names} />
  
  <main>
    <Hero names={site.names} subtitle={site.subtitle} />
    
    <Story description="Every great love story has a beginning. Ours started with a serendipitous moment that changed everything." />
    
    <Timeline events={timeline} />
    
    <Gallery photos={gallery} />
  </main>
  
  <Footer names={site.names} quote={site.quote} />
</BaseLayout>
